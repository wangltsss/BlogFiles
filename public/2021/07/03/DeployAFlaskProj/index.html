<!DOCTYPE html>
<html lang="en, zh-cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
<!-- Referrer Policy调整致不蒜子单页面统计出错:https://senorui.top/posts/c33f.html -->
<meta name="referrer" content="no-referrer-when-downgrade">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"stttw.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Preface The reason for writing this note is I met a lot of problems that do not have direct solutions that can be found online. I thought writing it down could help a lot as I may still face similar i">
<meta property="og:type" content="article">
<meta property="og:title" content="Deploying Flask project on CentOS 8">
<meta property="og:url" content="http://stttw.com/2021/07/03/DeployAFlaskProj/index.html">
<meta property="og:site_name" content="StttW&#39;s Blog">
<meta property="og:description" content="Preface The reason for writing this note is I met a lot of problems that do not have direct solutions that can be found online. I thought writing it down could help a lot as I may still face similar i">
<meta property="og:locale">
<meta property="article:published_time" content="2021-07-03T16:06:54.000Z">
<meta property="article:modified_time" content="2022-09-18T19:13:36.281Z">
<meta property="article:author" content="st w">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://stttw.com/2021/07/03/DeployAFlaskProj/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en, zh-cn'
  };
</script>

  <title>Deploying Flask project on CentOS 8 | StttW's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">StttW's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/wangltsss" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en, zh-cn">
    <link itemprop="mainEntityOfPage" href="http://stttw.com/2021/07/03/DeployAFlaskProj/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://img.xiaokeai.com/uploadfile/2020/0527/20200527030254779.jpg">
      <meta itemprop="name" content="st w">
      <meta itemprop="description" content="Share ideas while learning.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="StttW's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Deploying Flask project on CentOS 8
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-03 12:06:54" itemprop="dateCreated datePublished" datetime="2021-07-03T12:06:54-04:00">2021-07-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-09-18 15:13:36" itemprop="dateModified" datetime="2022-09-18T15:13:36-04:00">2022-09-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux-Shell/" itemprop="url" rel="index"><span itemprop="name">Linux & Shell</span></a>
                </span>
            </span>

          
            <span id="/2021/07/03/DeployAFlaskProj/" class="post-meta-item leancloud_visitors" data-flag-title="Deploying Flask project on CentOS 8" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2021/07/03/DeployAFlaskProj/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/07/03/DeployAFlaskProj/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>6.1k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>6 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="preface">Preface</h1>
<p>The reason for writing this note is I met a lot of problems that do not have direct solutions that can be found online. I thought writing it down could help a lot as I may still face similar issues in the future. <span id="more"></span> # About the server</p>
<p>I purchased a server provided by Ali cloud, which was on a almost 60% discount when I bought it.</p>
<h1 id="about-dependencies">About dependencies</h1>
<h2 id="python-version">Python version</h2>
<figure class="highlight plaintext"><figcaption><span>is a convenient instruction on CentOS. ```yum``` provides 4 versions of Python:</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- python2 </span><br><span class="line">- python36</span><br><span class="line">- python38</span><br><span class="line">- python39</span><br><span class="line"></span><br><span class="line">For instance, if you wish to install python 3.9, simply type in</span><br></pre></td></tr></table></figure>
<p>yum install python39 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> If you are prompted with permission denied, add ```sudo``` before the command.</span><br><span class="line"></span><br><span class="line">## Virtual environment</span><br><span class="line">Why is a venv (vertual environment) needed?</span><br><span class="line"></span><br><span class="line">The good thing about venv is that it has a scope limited to one project. It will not affect your system-level settings, and it is independent from other projects. For instance, when one of your project needs Fabric 1.x and another needs Fabric 2.x, and both project has venv, there will not be a conflict. However, if you do not have venv enabled, you will have to delete one version of Fabric.</span><br><span class="line"></span><br><span class="line">The official documentary suggests using</span><br></pre></td></tr></table></figure> python3 -m venv (/path to new virtual environment) <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">to create a new venv.</span><br><span class="line"></span><br><span class="line">For instance, you can use</span><br></pre></td></tr></table></figure> python3 -m venv venv <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">to create a venv under current working directory.</span><br><span class="line"></span><br><span class="line">After that, use</span><br></pre></td></tr></table></figure> source ./venv/bin/activate <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">to activate venv.</span><br><span class="line"></span><br><span class="line">To deactivate venv, simply type in</span><br></pre></td></tr></table></figure> deactivate <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line"></span><br><span class="line">## Dependencies</span><br><span class="line">This part requires your Flask project to be all set, waiting to be synchronized to the server. </span><br><span class="line"></span><br><span class="line">You can use</span><br></pre></td></tr></table></figure> pip freeze &gt; requirements.txt <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">to extract all packages installed in the current venv, and save them into a file named &#x27;requirements.txt&#x27;.</span><br><span class="line"></span><br><span class="line">To install all dependencies on server, simply type in:</span><br></pre></td></tr></table></figure> pip install -r requiremtns.txt <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Note that if you are prompted permission denied, Python documentary recommends using &#x27;--user&#x27; option instead of adding a sudo. The effect of this option is to install the package into current user&#x27;s home directory, instead of under where python is installed.</span><br><span class="line"></span><br><span class="line"># Install Nginx</span><br><span class="line">```Nginx``` is already packed by ```yum```, so we can use</span><br><span class="line"></span><br></pre></td></tr></table></figure> sudo yum install nginx <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">to install nginx.</span><br><span class="line"></span><br><span class="line">After installation, you can check if the installation was successful by</span><br></pre></td></tr></table></figure> nginx -v <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line"></span><br><span class="line">These are a few common commands:</span><br></pre></td></tr></table></figure> sudo systemctl enable nginx //Start Nginx upon booting sudo systemctl start nginx //Start Nginx sudo systemctl stop nginx //Shut down Nginx sudo systemctl restart nginx //Reload Nginx sudo systemctl status nginx //Check status of Nginx <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Install uwsgi</span><br><span class="line">You can install uwsgi through</span><br></pre></td></tr></table></figure> pip install uwsgi <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line"></span><br><span class="line">After installation, you can check if the installation was successful by</span><br></pre></td></tr></table></figure> uwsgi --version <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line"></span><br><span class="line"># Deploy to server</span><br><span class="line">Connect to your server, enter the directory under which you want your project to be placed.</span><br><span class="line"></span><br><span class="line">Synchroze your project with git, scp or sftp.</span><br><span class="line"></span><br><span class="line">Make sure the python version on your server matches that on your computer.</span><br><span class="line"></span><br><span class="line">Then, you can proceed to install dependencies using</span><br></pre></td></tr></table></figure> pip install -r requirements.txt <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line"></span><br><span class="line">## uwsgi initialization</span><br><span class="line">Create a file named &#x27;uwsgi.ini&#x27; under your project&#x27;s root directory.</span><br><span class="line">In the file, type in</span><br></pre></td></tr></table></figure> [uwsgi] socket=127.0.0.1:5000 //The port can be altered.</p>
<p>chdir=/home/wst/wms //Your project's root directory.</p>
<p>wsgi-file=app.py //Your start file. Note this is a relative path to your root dir.</p>
<p>callable=app //The name of your start file instance.</p>
<p>processes=4</p>
<p>threads=2</p>
<p>master=true</p>
<p>stats=127.0.0.1:9191</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Remember to delete the side notes. uwsgi cannot tell the difference between comments and scripts.</span><br><span class="line"></span><br><span class="line">## Nginx configuration</span><br><span class="line">The configuration file for Nginx, &#x27;nginx.conf&#x27;, is usually located under &#x27;/etc/nginx&#x27; directory. If you cannot find it, type in</span><br></pre></td></tr></table></figure>
<p>sudo nginx -t <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">to see where is it.</span><br><span class="line"></span><br><span class="line">Open it with a text editor:</span><br></pre></td></tr></table></figure> sudo vim /etc/nginx/nginx.conf <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">And you will see something like:</span><br></pre></td></tr></table></figure> # For more information on configuration, see: # * Official English Documentation: http://nginx.org/en/docs/ # * Official Russian Documentation: http://nginx.org/ru/docs/</p>
<p>user nginx; worker_processes auto; error_log /var/log/nginx/error.log; pid /run/nginx.pid;</p>
<h1 id="load-dynamic-modules.-see-usrsharedocnginxreadme.dynamic.">Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</h1>
<p>include /usr/share/nginx/modules/*.conf;</p>
<p>events { worker_connections 1024; }</p>
<p>http { log_format main '$remote_addr - <span class="math inline">\(remote_user [\)</span>time_local] "<span class="math inline">\(request&quot; &#39;  &#39;\)</span>status <span class="math inline">\(body_bytes_sent &quot;\)</span>http_referer" ' '"<span class="math inline">\(http_user_agent&quot; &quot;\)</span>http_x_forwarded_for"';</p>
<pre><code>access_log  /var/log/nginx/access.log  main;

sendfile            on;
tcp_nopush          on;
tcp_nodelay         on;
keepalive_timeout   65;
types_hash_max_size 2048;

include             /etc/nginx/mime.types;
default_type        application/octet-stream;

# Load modular configuration files from the /etc/nginx/conf.d directory.
# See http://nginx.org/en/docs/ngx_core_module.html#include
# for more information.
include /etc/nginx/conf.d/*.conf;

server &#123;
    listen       80 default_server;
    listen       [::]:80 default_server;
    server_name  _;
    root         /usr/share/nginx/html;

    # Load configuration files for the default server block.
    include /etc/nginx/default.d/*.conf;

    location / &#123;
    &#125;

    error_page 404 /404.html;
        location = /40x.html &#123;
    &#125;

    error_page 500 502 503 504 /50x.html;
        location = /50x.html &#123;
    &#125;
&#125;</code></pre>
<h1 id="settings-for-a-tls-enabled-server.">Settings for a TLS enabled server.</h1>
<h1 id="section"></h1>
<h1 id="server">server {</h1>
<h1 id="listen-443-ssl-http2-default_server">listen 443 ssl http2 default_server;</h1>
<h1 id="listen-443-ssl-http2-default_server-1">listen [::]:443 ssl http2 default_server;</h1>
<h1 id="server_name-_">server_name _;</h1>
<h1 id="root-usrsharenginxhtml">root /usr/share/nginx/html;</h1>
<h1 id="section-1"></h1>
<h1 id="ssl_certificate-etcpkinginxserver.crt">ssl_certificate "/etc/pki/nginx/server.crt";</h1>
<h1 id="ssl_certificate_key-etcpkinginxprivateserver.key">ssl_certificate_key "/etc/pki/nginx/private/server.key";</h1>
<h1 id="ssl_session_cache-sharedssl1m">ssl_session_cache shared:SSL:1m;</h1>
<h1 id="ssl_session_timeout-10m">ssl_session_timeout 10m;</h1>
<h1 id="ssl_ciphers-profilesystem">ssl_ciphers PROFILE=SYSTEM;</h1>
<h1 id="ssl_prefer_server_ciphers-on">ssl_prefer_server_ciphers on;</h1>
<h1 id="section-2"></h1>
<h1 id="load-configuration-files-for-the-default-server-block."># Load configuration files for the default server block.</h1>
<h1 id="include-etcnginxdefault.d.conf">include /etc/nginx/default.d/*.conf;</h1>
<h1 id="section-3"></h1>
<h1 id="location">location / {</h1>
<h1 id="section-4">}</h1>
<h1 id="section-5"></h1>
<h1 id="error_page-404-404.html">error_page 404 /404.html;</h1>
<h1 id="location-40x.html">location = /40x.html {</h1>
<h1 id="section-6">}</h1>
<h1 id="section-7"></h1>
<h1 id="error_page-500-502-503-504-50x.html">error_page 500 502 503 504 /50x.html;</h1>
<h1 id="location-50x.html">location = /50x.html {</h1>
<h1 id="section-8">}</h1>
<h1 id="section-9">}</h1>
<p>} <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Change &#x27;server_name&#x27; inside &#x27;server&#x27; to your ip address or your domain name.</span><br><span class="line"></span><br><span class="line">Add two lines under &#x27;root&#x27;. One is &#x27;access_log&#x27;, the other is &#x27;error_log&#x27;.</span><br><span class="line"></span><br><span class="line">Enable &#x27;uwsgi_params&#x27; in &#x27;location /&#x27;.</span><br><span class="line"></span><br></pre></td></tr></table></figure> server { listen 80 default_server; listen [::]:80 default_server; server_name xxx.xxx.xxx.xxx; root /usr/share/nginx/html; access_log /home/wst/wms/logs/access.log; error_log /home/wst/wms/logs/error.log;</p>
<pre><code>    # Load configuration files for the default server block.
    include /etc/nginx/default.d/*.conf;

    location / &#123;
        include     uwsgi_params;
        uwsgi_pass      127.0.0.1:5000; #这里与uwsgi配置文件里的socket保持一致
        uwsgi_param UWSGI_PYHOME /home/wst/wms/venv; #python虚拟环境的地址
        uwsgi_param UWSGI_CHDIR  /home/wst/wms; #项目根目录地址
        uwsgi_param UWSGI_SCRIPT app:app; #启动脚本名:实例名
    &#125;

    error_page 404 /404.html;
        location = /40x.html &#123;
    &#125;

    error_page 500 502 503 504 /50x.html;
        location = /50x.html &#123;
    &#125;
&#125;</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Then use</span><br></pre></td></tr></table></figure>
<p>sudo nginx -t <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">to check if there is any grammatical error.</span><br><span class="line">If you are not prompted an error, type in</span><br></pre></td></tr></table></figure> sudo systemctl restart nginx ``` . Now you should be able to see your web app running on your domain or your ip address.</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"># Python</a>
              <a href="/tags/Linux/" rel="tag"># Linux</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/2021/08/17/NoteAboutPyserial/" rel="next" title="Notes on using Pyserial">
      Notes on using Pyserial <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#preface"><span class="nav-number">1.</span> <span class="nav-text">Preface</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#about-dependencies"><span class="nav-number">2.</span> <span class="nav-text">About dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#python-version"><span class="nav-number">2.1.</span> <span class="nav-text">Python version</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#load-dynamic-modules.-see-usrsharedocnginxreadme.dynamic."><span class="nav-number">3.</span> <span class="nav-text">Load dynamic modules. See &#x2F;usr&#x2F;share&#x2F;doc&#x2F;nginx&#x2F;README.dynamic.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#settings-for-a-tls-enabled-server."><span class="nav-number">4.</span> <span class="nav-text">Settings for a TLS enabled server.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section"><span class="nav-number">5.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#server"><span class="nav-number">6.</span> <span class="nav-text">server {</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#listen-443-ssl-http2-default_server"><span class="nav-number">7.</span> <span class="nav-text">listen 443 ssl http2 default_server;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#listen-443-ssl-http2-default_server-1"><span class="nav-number">8.</span> <span class="nav-text">listen [::]:443 ssl http2 default_server;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#server_name-_"><span class="nav-number">9.</span> <span class="nav-text">server_name _;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#root-usrsharenginxhtml"><span class="nav-number">10.</span> <span class="nav-text">root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-1"><span class="nav-number">11.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ssl_certificate-etcpkinginxserver.crt"><span class="nav-number">12.</span> <span class="nav-text">ssl_certificate &quot;&#x2F;etc&#x2F;pki&#x2F;nginx&#x2F;server.crt&quot;;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ssl_certificate_key-etcpkinginxprivateserver.key"><span class="nav-number">13.</span> <span class="nav-text">ssl_certificate_key &quot;&#x2F;etc&#x2F;pki&#x2F;nginx&#x2F;private&#x2F;server.key&quot;;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ssl_session_cache-sharedssl1m"><span class="nav-number">14.</span> <span class="nav-text">ssl_session_cache shared:SSL:1m;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ssl_session_timeout-10m"><span class="nav-number">15.</span> <span class="nav-text">ssl_session_timeout 10m;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ssl_ciphers-profilesystem"><span class="nav-number">16.</span> <span class="nav-text">ssl_ciphers PROFILE&#x3D;SYSTEM;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ssl_prefer_server_ciphers-on"><span class="nav-number">17.</span> <span class="nav-text">ssl_prefer_server_ciphers on;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-2"><span class="nav-number">18.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#load-configuration-files-for-the-default-server-block."><span class="nav-number">19.</span> <span class="nav-text"># Load configuration files for the default server block.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#include-etcnginxdefault.d.conf"><span class="nav-number">20.</span> <span class="nav-text">include &#x2F;etc&#x2F;nginx&#x2F;default.d&#x2F;*.conf;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-3"><span class="nav-number">21.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#location"><span class="nav-number">22.</span> <span class="nav-text">location &#x2F; {</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-4"><span class="nav-number">23.</span> <span class="nav-text">}</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-5"><span class="nav-number">24.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#error_page-404-404.html"><span class="nav-number">25.</span> <span class="nav-text">error_page 404 &#x2F;404.html;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#location-40x.html"><span class="nav-number">26.</span> <span class="nav-text">location &#x3D; &#x2F;40x.html {</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-6"><span class="nav-number">27.</span> <span class="nav-text">}</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-7"><span class="nav-number">28.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#error_page-500-502-503-504-50x.html"><span class="nav-number">29.</span> <span class="nav-text">error_page 500 502 503 504 &#x2F;50x.html;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#location-50x.html"><span class="nav-number">30.</span> <span class="nav-text">location &#x3D; &#x2F;50x.html {</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-8"><span class="nav-number">31.</span> <span class="nav-text">}</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#section-9"><span class="nav-number">32.</span> <span class="nav-text">}</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="st w"
      src="https://img.xiaokeai.com/uploadfile/2020/0527/20200527030254779.jpg">
  <p class="site-author-name" itemprop="name">st w</p>
  <div class="site-description" itemprop="description">Share ideas while learning.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/wangltsss" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wangltsss" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:me@stttw.com" title="E-Mail → mailto:me@stttw.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">st w</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">16k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">15 mins.</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
    <span class="post-count">| 博客共16k字</span>
  </div>
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-61f2cf5b2a5d7e12" async="async"></script>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'nflbOJbX4Hdx110wPTbCcYQJ-gzGzoHsz',
      appKey     : '3M98T2DabXtKJpFe7vbhcVyD',
      placeholder: "提交评论时留下邮箱收到回复后将自动通知",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
